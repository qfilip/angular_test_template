<app-todo-title-dialog #todoTitleDialog></app-todo-title-dialog>
<app-todo-history-dialog #todoHistoryDialog></app-todo-history-dialog>

<ul>
    @let todos = $todos();
    @let display = $display();

    @for(x of todos; track $index) {
        <li>
            <span>
                {{ x.title }}
            </span>
            <span>
                @switch (display) {
                    @case('pending') {
                        <button (click)="toggleCompleted(x)" class="ok">Complete</button>
                        <button (click)="updateTitle(x)" class="warn">Update title</button>
                    }
                    @case ('completed') {
                        <button (click)="toggleCompleted(x)" class="ok">Reactivate</button>
                    }
                }
                <button (click)="viewHistory(x)" class="info">View history</button>
                <button (click)="deleteTodo(x)" class="error">Delete</button>
            </span>
        </li>
    }
</ul>