<div class="composite-container">
  <h2>Students with Addresses</h2>

  @if (error()) {
  <div class="error-message">
    {{ error() }}
  </div>
  } @if (loading()) {
  <div class="loading">Loading...</div>
  } @if (!loading() && students().length > 0) {
  <div class="table-header">
    <h3>Students ({{ students().length }})</h3>
    <button (click)="refresh()" class="btn-secondary">Refresh</button>
  </div>

  <table class="data-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Street</th>
        <th>City</th>
        <th>State</th>
        <th>Zip Code</th>
      </tr>
    </thead>
    <tbody>
      @for (student of students(); track student.id) {
      <tr>
        <td class="cell-id">{{ student.id }}</td>
        <td>{{ student.firstName }}</td>
        <td>{{ student.lastName }}</td>
        <td>{{ student.address.street }}</td>
        <td>{{ student.address.city }}</td>
        <td>{{ student.address.state }}</td>
        <td>{{ student.address.zipCode }}</td>
      </tr>
      }
    </tbody>
  </table>
  } @if (!loading() && students().length === 0 && !error()) {
  <div class="empty-state">
    <p class="no-items">No students found.</p>
  </div>
  }
</div>
